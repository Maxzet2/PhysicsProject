# PhysicsProject.Web

React + TypeScript SPA for the PhysicsProject training platform. The app talks to the existing ASP.NET Core API and provides:

- локальную авторизацию (данные пользователя сохраняются в `localStorage`)
- представление «Учебный план» с прогрессом по главам и разделам, стартом тренировки/теста и сбросом попыток
- рабочее место прохождения сессии с таймером, статистикой, логом событий и отправкой ответов

## Подготовка

```bash
cd PhysicsProject.Web
npm install
```

По умолчанию фронтенд стучится в тот же origin, что и страница. Чтобы задать явный адрес API (например, при запуске `dotnet run`), создайте файл `.env` и опишите переменную:

```
VITE_API_BASE_URL=http://localhost:5120
```

## Сценарии npm

| Команда | Назначение |
| --- | --- |
| `npm run dev` | локальная разработка с Vite и HMR |
| `npm run build` | production-сборка (попадает в `dist/`) |
| `npm run preview` | предпросмотр собранной версии |

## Рабочий процесс

1. Зарегистрируйтесь или войдите: API `/api/auth` создаёт пользователя, а UI сохраняет пару `userId/userName` локально.
2. Учебный план (`/api/study-plan`) подставляет прогресс по разделам конкретного пользователя. С панели можно:
   - стартовать тренировку (не ограничена по попыткам)
   - стартовать тест (учитываются попытки и активное окно) — наличие свободных попыток подсвечивается
   - сбросить попытки, если лимит исчерпан
3. Активная сессия отображает текущий вопрос, журнал действий, таймер (если тест) и кнопки «Отправить», «Пропустить», «Завершить». Завершение обращается к `/api/sessions/{id}/finish` и обновляет прогресс раздела.

## Советы по интеграции

- Для Docker-сборки можно скопировать содержимое `dist/` в `PhysicsProject.Api/wwwroot` или поднять фронтенд отдельно через nginx.
- При разработке удобно запускать API на `http://localhost:5120` и фронтенд на `http://localhost:5173`, прокидывая `VITE_API_BASE_URL`.
- Если API защищено CORS, не забудьте добавить порт фронтенда в `WithOrigins`.
